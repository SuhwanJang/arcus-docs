



<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      <meta http-equiv="x-ua-compatible" content="ie=edge">
      
      
      
      
        <meta name="lang:clipboard.copy" content="Copy to clipboard">
      
        <meta name="lang:clipboard.copied" content="Copied to clipboard">
      
        <meta name="lang:search.language" content="en">
      
        <meta name="lang:search.pipeline.stopwords" content="True">
      
        <meta name="lang:search.pipeline.trimmer" content="True">
      
        <meta name="lang:search.result.none" content="No matching documents">
      
        <meta name="lang:search.result.one" content="1 matching document">
      
        <meta name="lang:search.result.other" content="# matching documents">
      
        <meta name="lang:search.tokenizer" content="[\s\-]+">
      
      <link rel="shortcut icon" href="../../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.0.4, mkdocs-material-4.5.0">
    
    

    
      <link rel="stylesheet" href="../../../assets/stylesheets/application.1b62728e.css">
      
      
    
    
      <script src="../../../assets/javascripts/modernizr.268332fc.js"></script>
    
    
      
        <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700|Roboto+Mono&display=fallback">
        <style>body,input{font-family:"Roboto","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono","Courier New",Courier,monospace}</style>
      
    
    <link rel="stylesheet" href="../../../assets/fonts/material-icons.css">
    
    
      <link rel="stylesheet" href="../../../custom/extra.css">
    
    
      
    
    
  </head>
  
    <body dir="ltr">
  
    <svg class="md-svg">
      <defs>
        
        
          <svg xmlns="http://www.w3.org/2000/svg" width="416" height="448" viewBox="0 0 416 448" id="__github"><path fill="currentColor" d="M160 304q0 10-3.125 20.5t-10.75 19T128 352t-18.125-8.5-10.75-19T96 304t3.125-20.5 10.75-19T128 256t18.125 8.5 10.75 19T160 304zm160 0q0 10-3.125 20.5t-10.75 19T288 352t-18.125-8.5-10.75-19T256 304t3.125-20.5 10.75-19T288 256t18.125 8.5 10.75 19T320 304zm40 0q0-30-17.25-51T296 232q-10.25 0-48.75 5.25Q229.5 240 208 240t-39.25-2.75Q130.75 232 120 232q-29.5 0-46.75 21T56 304q0 22 8 38.375t20.25 25.75 30.5 15 35 7.375 37.25 1.75h42q20.5 0 37.25-1.75t35-7.375 30.5-15 20.25-25.75T360 304zm56-44q0 51.75-15.25 82.75-9.5 19.25-26.375 33.25t-35.25 21.5-42.5 11.875-42.875 5.5T212 416q-19.5 0-35.5-.75t-36.875-3.125-38.125-7.5-34.25-12.875T37 371.5t-21.5-28.75Q0 312 0 260q0-59.25 34-99-6.75-20.5-6.75-42.5 0-29 12.75-54.5 27 0 47.5 9.875t47.25 30.875Q171.5 96 212 96q37 0 70 8 26.25-20.5 46.75-30.25T376 64q12.75 25.5 12.75 54.5 0 21.75-6.75 42 34 40 34 99.5z"/></svg>
        
      </defs>
    </svg>
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" data-md-component="overlay" for="__drawer"></label>
    
      <a href="#java-client" tabindex="1" class="md-skip">
        Skip to content
      </a>
    
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href="../../.." title="ARCUS Documentation" class="md-header-nav__button md-logo">
          
            <img src="../../../images/logo.png" width="24" height="24">
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="__drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
          
            <span class="md-header-nav__topic">
              ARCUS Documentation
            </span>
            <span class="md-header-nav__topic">
              
                11. client notes
              
            </span>
          
        </div>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        
          <label class="md-icon md-icon--search md-header-nav__button" for="__search"></label>
          
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query" data-md-state="active">
      <label class="md-icon md-search__icon" for="__search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset" tabindex="-1">
        &#xE5CD;
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result">
          <div class="md-search-result__meta">
            Type to start searching
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
        
      </div>
      
        <div class="md-flex__cell md-flex__cell--shrink">
          <div class="md-header-nav__source">
            


  

<a href="https://github.com/naver/arcus" title="Go to repository" class="md-source" data-md-source="github">
  
    <div class="md-source__icon">
      <svg viewBox="0 0 24 24" width="24" height="24">
        <use xlink:href="#__github" width="24" height="24"></use>
      </svg>
    </div>
  
  <div class="md-source__repository">
    naver/arcus
  </div>
</a>
          </div>
        </div>
      
    </div>
  </nav>
</header>
    
    <div class="md-container">
      
        
      
      
        

  

<nav class="md-tabs md-tabs--active" data-md-component="tabs">
  <div class="md-tabs__inner md-grid">
    <ul class="md-tabs__list">
      
        
  <li class="md-tabs__item">
    
      <a href="../../.." class="md-tabs__link">
        Home
      </a>
    
  </li>

      
        
  
  
    
    
  
  
    
    
  
  
    <li class="md-tabs__item">
      
        <a href="../../../arcus-server/ARCUS-Server-Ascii-Protocol/1.11-(latest)/1.-ARCUS-Basic-Concept/" class="md-tabs__link">
          Arcus server
        </a>
      
    </li>
  

  

  

      
        
  
  
    
    
  
  
    <li class="md-tabs__item">
      
        <a href="../../../arcus-c-client/1.10-(latest)/1.-arcus-c-client/" class="md-tabs__link">
          Arcus c client
        </a>
      
    </li>
  

  

      
        
  
  
    
    
  
  
    <li class="md-tabs__item">
      
        <a href="../1.-getting-started/" class="md-tabs__link md-tabs__link--active">
          Arcus java client
        </a>
      
    </li>
  

  

      
        
  
  
    
    
  
  
    <li class="md-tabs__item">
      
        <a href="../../../admin/1.11-(latest)/arcus-admin-script-usage/" class="md-tabs__link">
          Admin
        </a>
      
    </li>
  

  

      
    </ul>
  </div>
</nav>
      
      <main class="md-main" role="main">
        <div class="md-main__inner md-grid" data-md-component="container">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="__drawer">
    <a href="../../.." title="ARCUS Documentation" class="md-nav__button md-logo">
      
        <img src="../../../images/logo.png" width="48" height="48">
      
    </a>
    ARCUS Documentation
  </label>
  
    <div class="md-nav__source">
      


  

<a href="https://github.com/naver/arcus" title="Go to repository" class="md-source" data-md-source="github">
  
    <div class="md-source__icon">
      <svg viewBox="0 0 24 24" width="24" height="24">
        <use xlink:href="#__github" width="24" height="24"></use>
      </svg>
    </div>
  
  <div class="md-source__repository">
    naver/arcus
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href="../../.." title="Home" class="md-nav__link">
      Home
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-2" type="checkbox" id="nav-2">
    
    <label class="md-nav__link" for="nav-2">
      Arcus server
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-2">
        Arcus server
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-2-1" type="checkbox" id="nav-2-1">
    
    <label class="md-nav__link" for="nav-2-1">
      ARCUS Server Ascii Protocol
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-2-1">
        ARCUS Server Ascii Protocol
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-2-1-1" type="checkbox" id="nav-2-1-1">
    
    <label class="md-nav__link" for="nav-2-1-1">
      1.11 (latest)
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="3">
      <label class="md-nav__title" for="nav-2-1-1">
        1.11 (latest)
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../arcus-server/ARCUS-Server-Ascii-Protocol/1.11-(latest)/1.-ARCUS-Basic-Concept/" title="1. ARCUS Basic Concept" class="md-nav__link">
      1. ARCUS Basic Concept
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../arcus-server/ARCUS-Server-Ascii-Protocol/1.11-(latest)/2.-Simple-Key-Value-Command/" title="2. Simple Key Value Command" class="md-nav__link">
      2. Simple Key Value Command
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../arcus-server/ARCUS-Server-Ascii-Protocol/1.11-(latest)/3.-List-Collection-Command/" title="3. List Collection Command" class="md-nav__link">
      3. List Collection Command
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../arcus-server/ARCUS-Server-Ascii-Protocol/1.11-(latest)/4.-Set-Collection-Command/" title="4. Set Collection Command" class="md-nav__link">
      4. Set Collection Command
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../arcus-server/ARCUS-Server-Ascii-Protocol/1.11-(latest)/5.-Map-Collection-Command/" title="5. Map Collection Command" class="md-nav__link">
      5. Map Collection Command
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../arcus-server/ARCUS-Server-Ascii-Protocol/1.11-(latest)/6.-B+tree-Collection-Command/" title="6. B+tree Collection Command" class="md-nav__link">
      6. B+tree Collection Command
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../arcus-server/ARCUS-Server-Ascii-Protocol/1.11-(latest)/7.-Collection-Command-Pipelining/" title="7. Collection Command Pipelining" class="md-nav__link">
      7. Collection Command Pipelining
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../arcus-server/ARCUS-Server-Ascii-Protocol/1.11-(latest)/8.-Item-Attribute-Command/" title="8. Item Attribute Command" class="md-nav__link">
      8. Item Attribute Command
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../arcus-server/ARCUS-Server-Ascii-Protocol/1.11-(latest)/9.-Administration-Command/" title="9. Administration Command" class="md-nav__link">
      9. Administration Command
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../arcus-server/ARCUS-Server-Ascii-Protocol/1.11-(latest)/10.-List-Sample/" title="10. List Sample" class="md-nav__link">
      10. List Sample
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-2-2" type="checkbox" id="nav-2-2">
    
    <label class="md-nav__link" for="nav-2-2">
      Arcus telnet interface
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-2-2">
        Arcus telnet interface
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../arcus-server/arcus-telnet-interface/1.11-(latest)/" title="1.11 (latest)" class="md-nav__link">
      1.11 (latest)
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3" type="checkbox" id="nav-3">
    
    <label class="md-nav__link" for="nav-3">
      Arcus c client
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-3">
        Arcus c client
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3-1" type="checkbox" id="nav-3-1">
    
    <label class="md-nav__link" for="nav-3-1">
      1.10 (latest)
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-3-1">
        1.10 (latest)
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../arcus-c-client/1.10-(latest)/1.-arcus-c-client/" title="1. arcus c client" class="md-nav__link">
      1. arcus c client
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../arcus-c-client/1.10-(latest)/2.-key-value-API/" title="2. key value API" class="md-nav__link">
      2. key value API
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../arcus-c-client/1.10-(latest)/3.-list-API/" title="3. list API" class="md-nav__link">
      3. list API
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../arcus-c-client/1.10-(latest)/4.-set-API/" title="4. set API" class="md-nav__link">
      4. set API
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../arcus-c-client/1.10-(latest)/5.-map-API/" title="5. map API" class="md-nav__link">
      5. map API
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../arcus-c-client/1.10-(latest)/6.-btree-API/" title="6. btree API" class="md-nav__link">
      6. btree API
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../arcus-c-client/1.10-(latest)/7.-attribute-API/" title="7. attribute API" class="md-nav__link">
      7. attribute API
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../arcus-c-client/1.10-(latest)/8.-other-API/" title="8. other API" class="md-nav__link">
      8. other API
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../arcus-c-client/1.10-(latest)/9.-appendix/" title="9. appendix" class="md-nav__link">
      9. appendix
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4" type="checkbox" id="nav-4" checked>
    
    <label class="md-nav__link" for="nav-4">
      Arcus java client
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-4">
        Arcus java client
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4-1" type="checkbox" id="nav-4-1" checked>
    
    <label class="md-nav__link" for="nav-4-1">
      1.11 (latest)
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-4-1">
        1.11 (latest)
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../1.-getting-started/" title="1. getting started" class="md-nav__link">
      1. getting started
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../2.-arcus-java-client/" title="2. arcus java client" class="md-nav__link">
      2. arcus java client
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../3.-key-value-API/" title="3. key value API" class="md-nav__link">
      3. key value API
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../4.-list-API/" title="4. list API" class="md-nav__link">
      4. list API
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../5.-set-API/" title="5. set API" class="md-nav__link">
      5. set API
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../6.-map-API/" title="6. map API" class="md-nav__link">
      6. map API
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../7.-btree-API/" title="7. btree API" class="md-nav__link">
      7. btree API
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../8.-attribute-API/" title="8. attribute API" class="md-nav__link">
      8. attribute API
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../9.-other-API/" title="9. other API" class="md-nav__link">
      9. other API
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../10.-log-message/" title="10. log message" class="md-nav__link">
      10. log message
    </a>
  </li>

        
          
          
          

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-toggle md-nav__toggle" data-md-toggle="toc" type="checkbox" id="__toc">
    
    
      <label class="md-nav__link md-nav__link--active" for="__toc">
        11. client notes
      </label>
    
    <a href="./" title="11. client notes" class="md-nav__link md-nav__link--active">
      11. client notes
    </a>
    
      
<nav class="md-nav md-nav--secondary">
  
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#java-client" class="md-nav__link">
    Java Client 사용시 주의사항
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#counter" class="md-nav__link">
    Counter 사용
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#operation-queue-block-timeout" class="md-nav__link">
    Operation Queue Block Timeout 설정
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#expiretime" class="md-nav__link">
    Expiretime 설정
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#operation-timeout" class="md-nav__link">
    Operation timeout 설정
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
    
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-5" type="checkbox" id="nav-5">
    
    <label class="md-nav__link" for="nav-5">
      Admin
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-5">
        Admin
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-5-1" type="checkbox" id="nav-5-1">
    
    <label class="md-nav__link" for="nav-5-1">
      1.11 (latest)
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-5-1">
        1.11 (latest)
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../admin/1.11-(latest)/arcus-admin-script-usage/" title="Arcus admin script usage" class="md-nav__link">
      Arcus admin script usage
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../admin/1.11-(latest)/arcus-cloud-configuration-file/" title="Arcus cloud configuration file" class="md-nav__link">
      Arcus cloud configuration file
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../admin/1.11-(latest)/arcus-cloud-in-multiple-servers/" title="Arcus cloud in multiple servers" class="md-nav__link">
      Arcus cloud in multiple servers
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../admin/1.11-(latest)/arcus-directory-structure/" title="Arcus directory structure" class="md-nav__link">
      Arcus directory structure
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../admin/1.11-(latest)/deploy-ssh-public-key/" title="Deploy ssh public key" class="md-nav__link">
      Deploy ssh public key
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../admin/1.11-(latest)/deploying-arcus-to-multiple-servers/" title="Deploying arcus to multiple servers" class="md-nav__link">
      Deploying arcus to multiple servers
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../admin/1.11-(latest)/faq-ko/" title="Faq ko" class="md-nav__link">
      Faq ko
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../admin/1.11-(latest)/howto-install-dependencies/" title="Howto install dependencies" class="md-nav__link">
      Howto install dependencies
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../admin/1.11-(latest)/howto-manage-submodules/" title="Howto manage submodules" class="md-nav__link">
      Howto manage submodules
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary">
  
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#java-client" class="md-nav__link">
    Java Client 사용시 주의사항
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#counter" class="md-nav__link">
    Counter 사용
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#operation-queue-block-timeout" class="md-nav__link">
    Operation Queue Block Timeout 설정
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#expiretime" class="md-nav__link">
    Expiretime 설정
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#operation-timeout" class="md-nav__link">
    Operation timeout 설정
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                
                  <h1>11. client notes</h1>
                
                <h2 id="java-client">Java Client 사용시 주의사항</h2>
<h3 id="counter">Counter 사용</h3>
<p>Arcus에서 counter를 사용할 경우 최초에 set 또는 add command를 이용하여 counter key를 등록해야 한다.
일단 다음과 같이 저장해 보자.</p>
<pre><code class="java">client.set(&quot;nhn_counter&quot;, 10000, 100); // 사실은 절대 이렇게 사용하면 안된다!
</code></pre>

<p>분명히 잘 저장되었다는 결과를 받을 것이다. 이번에는 incr counter를 이용해서 값을 증가시켜 보자.</p>
<pre><code class="java">Future&lt;Long&gt; f = client.asyncIncr(&quot;nhn_counter&quot;, 1);
Object o = f.get(1000, TimeUnit.MILLISECONDS);
</code></pre>

<p>그런데, 이번에는 “cannot increment or decrement non-numeric value” 라는 에러 메시지를 받을 것이다.
Cache 서버에서 직접 counter 정보를 조회해 보면 “d”가 저장되어 있을 것이다.
왜 이런 일이 벌어졌을까? 이유는 다음과 같이 2가지다.</p>
<ul>
<li>
<p>Cache server에 저장할 때 data type을 보내지 않았으니, 데이터를 저장할 때 byte 값을 그대로 저장할 것이다.
  참고로 100의 비트 값은 “01100100”이니까 ASCII code 값으로는 “d”다.
  그러면 counter에서는 이 값을 int값으로 변경하면 되지 않을까 생각하겠지만 여기에는 또 다른 이유가 있다.</p>
</li>
<li>
<p>Cache server는 multi-platform을 지원해야 하므로 byte-ordering(endianness)에 상관없이 데이터를 저장할 수 있어야 한다.
  좀 더 자세하게 말하면 cache server의 counter는 Integer 값만 받을 수 있게 되어 있는데,
  platform에 상관없이 동작하기 위한 방법은 오직 String으로 값을 입력할 수밖에 없는 것이다.
  만약 cache server가 primitive값을 지원한다면, 즉 byte-ordering이 서로 다른 client를 사용한다면
  counter가 우리가 원하는 대로 동작하지 않을 것이다.
  따라서 앞서 언급했듯이 “d”값을 integer값으로 변경할 수 없었던 것이다.</p>
</li>
</ul>
<p><strong>Arcus는 counter 로 사용할 데이터의 최초 값은 반드시 String으로 지정하도록 강제하고 있다.</strong>
<strong>따라서, 반드시 최초 값은 다음과 같이 String 값으로 설정해야 한다.</strong></p>
<pre><code class="java">client.set(&quot;nhn_counter&quot;, 10000, &quot;100&quot;); // 반드시 이렇게 사용해야 한다!
</code></pre>

<p>참고로, 정말 운이 좋은 개발자는 integer 값으로 등록해도 에러가 나지 않을 수 있다.
예를 들어 52로 초기값을 저장한다고 하면, 이번에는 counter를 사용해도 에러가 나지 않을 것이다.
왜냐하면 52의 ASCII code값이 4이기 때문이다.</p>
<p>그리고, arcus client에서 incr/decr command의 입력 값을 primitive 또는 numeric wrapper 값으로 받을 수 있도록 되어 있으나, 내부적으로는 String으로 변환 후 cache server로 전달하도록 되어 있다.</p>
<h3 id="operation-queue-block-timeout">Operation Queue Block Timeout 설정</h3>
<p>setOpQueueMaxBlockTime(long t) 함수를 이용하여 queue에 operation을 등록할 때 timeout을 설정한 경우,
모든 operation은 IllegalStateException을 다음 코드와 같이 catch해 주어야 한다.</p>
<pre><code class="java">Future&lt;Boolean&gt; future = null;
try {
    future = client.set(key, 60 * 60 * 24, value);
} catch (IllegalStateException ise) { // operation queue가 full 상태여서 timeout 내에 Operation을 등록하지 못한 경우
    System.out.println(&quot;illegal state exception&quot;);
}

if (future != null) {
    try {
        boolean result = future.get(1000, TimeUnit.MILLISECONDS);
    } catch (TimeoutException e) {
        f.cancel(true);
        System.out.println(&quot;timeout exception&quot;);
    } catch (ExecutionException e) {
        f.cancel(true);
        System.out.println(&quot;execution exception&quot;);
    } catch (InterruptedException e) {
        f.cancel(true);
        System.out.println(&quot;interrupted exception&quot;);
    }
}
</code></pre>

<p>Operation queue block timeout 옵션을 설정하지 않으면, 작업 요청을 하는 client 함수들은 모두 blocking을 당할 수가 있다.
물론, 실제로 future.get 수행시 정상 처리가 되든 exception이 나서 취소가 되든 operation queue에 등록된 작업은
지속적으로 빠져나가 operation queue에 작업을 등록할 공간은 느리지만 생길 것이다.
그러나, request 요청 속도가 operation queue에 등록된 작업의 처리 속도보다 매우 빠르다면,
해당 request를 요청하는 것보다 차라리 바로 실패로 처리하고,
back-end 데이터 저장소로 요청을 보내는 것이 더 좋은 선택이 될 수 있다.</p>
<h3 id="expiretime">Expiretime 설정</h3>
<p>Expiretime은 초 단위로 지정된 시간만큼 미래의 시간인 Unix Time으로 변경되어 저장된다.
그러나, '''expire time이 30일을 초과하면 1970년 기준의 Unix time으로 변경된다.''' 
예를 들어, expiretime을 1000 * 60 * 60과 같은 식으로 등록을 하게 되면 대략 40일 정도가 되는데,
이는 1970년 기준의 unix time으로 인식되어 아주 옛날 시간이 되어 버리고 즉각 expire하게 된다.
 '''따라서 client에서는 분명히 저장했다고 생각하여 retrieval command(get, gets)를 수행했을 경우에
 cache data가 전혀 나오지 않는 현상이 발생할 수 있는 것이다.'''</p>
<h3 id="operation-timeout">Operation timeout 설정</h3>
<p>ArcusClient의 모든 비동기방식의 메서드를 호출할 때 timeout을 지정할 수 있다.
<strong>이러한 timeout 값을 반드시 지정하여 사용할 것을 권장한다.</strong></p>
<pre><code class="java">Future&lt;Boolean&gt; setResult = client.set(&quot;sample:testKey&quot;, 10, &quot;testValue&quot;);
boolean result = setResult.get(300L, TimeUnit.MILLISECONDS);
</code></pre>

<p>위 예제는 Arcus cache server에 “testValue”를 저장할 때 timeout값을 300ms로 지정한 코드이다.</p>
<p>첫째, 이 코드가 실행되는 시점에서 full GC(garbage collection)가 발생했고, 
full GC time이 500ms였다면 이 요청은 timeout이 되게 된다.
<strong>따라서, timeout값은 JVM full GC time을 고려하여 설정해야 한다.</strong>
<strong>대부분 몇십 개의 timeout이 발생하는 문제는 full GC time이 길어서 발생하는 문제이다.</strong></p>
<p>둘째, burst traffic, small packet buffer size 등의 이유로 cache client와 cache server 사이에
packet retransmission이 발생할 수 있다.
Linux 환경에서 최소 retransmission timeout은 200ms이며,
그 다음의 retransmission timeout은 400ms, 800ms, ... 형태로 두 배씩 길어지게 된다.
Packet retransmission은 제법 흔하게 발생하고 있으므로,
이러한 packet retransmission에 대해 견딜 수 있을 정도로 timeout을 설정하길 권장한다.
따라서, 300ms, 700ms 정도가 권장되는 timeout 값이다.</p>
                
                  
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      

    </div>
    
      <script src="../../../assets/javascripts/application.a8b5e56f.js"></script>
      
      <script>app.initialize({version:"1.0.4",url:{base:"../../.."}})</script>
      
    
  </body>
</html>