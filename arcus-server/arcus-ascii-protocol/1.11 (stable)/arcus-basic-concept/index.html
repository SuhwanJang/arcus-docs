



<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      <meta http-equiv="x-ua-compatible" content="ie=edge">
      
      
      
      
        <meta name="lang:clipboard.copy" content="Copy to clipboard">
      
        <meta name="lang:clipboard.copied" content="Copied to clipboard">
      
        <meta name="lang:search.language" content="en">
      
        <meta name="lang:search.pipeline.stopwords" content="True">
      
        <meta name="lang:search.pipeline.trimmer" content="True">
      
        <meta name="lang:search.result.none" content="No matching documents">
      
        <meta name="lang:search.result.one" content="1 matching document">
      
        <meta name="lang:search.result.other" content="# matching documents">
      
        <meta name="lang:search.tokenizer" content="[\s\-]+">
      
      <link rel="shortcut icon" href="../../../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.0.4, mkdocs-material-4.4.3">
    
    
      
        <title>Arcus basic concept - arcus docs</title>
      
    
    
      <link rel="stylesheet" href="../../../../assets/stylesheets/application.30686662.css">
      
      
    
    
      <script src="../../../../assets/javascripts/modernizr.74668098.js"></script>
    
    
      
        <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700|Roboto+Mono&display=fallback">
        <style>body,input{font-family:"Roboto","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono","Courier New",Courier,monospace}</style>
      
    
    <link rel="stylesheet" href="../../../../assets/fonts/material-icons.css">
    
    
    
      
    
    
  </head>
  
    <body dir="ltr">
  
    <svg class="md-svg">
      <defs>
        
        
          <svg xmlns="http://www.w3.org/2000/svg" width="416" height="448" viewBox="0 0 416 448" id="__github"><path fill="currentColor" d="M160 304q0 10-3.125 20.5t-10.75 19T128 352t-18.125-8.5-10.75-19T96 304t3.125-20.5 10.75-19T128 256t18.125 8.5 10.75 19T160 304zm160 0q0 10-3.125 20.5t-10.75 19T288 352t-18.125-8.5-10.75-19T256 304t3.125-20.5 10.75-19T288 256t18.125 8.5 10.75 19T320 304zm40 0q0-30-17.25-51T296 232q-10.25 0-48.75 5.25Q229.5 240 208 240t-39.25-2.75Q130.75 232 120 232q-29.5 0-46.75 21T56 304q0 22 8 38.375t20.25 25.75 30.5 15 35 7.375 37.25 1.75h42q20.5 0 37.25-1.75t35-7.375 30.5-15 20.25-25.75T360 304zm56-44q0 51.75-15.25 82.75-9.5 19.25-26.375 33.25t-35.25 21.5-42.5 11.875-42.875 5.5T212 416q-19.5 0-35.5-.75t-36.875-3.125-38.125-7.5-34.25-12.875T37 371.5t-21.5-28.75Q0 312 0 260q0-59.25 34-99-6.75-20.5-6.75-42.5 0-29 12.75-54.5 27 0 47.5 9.875t47.25 30.875Q171.5 96 212 96q37 0 70 8 26.25-20.5 46.75-30.25T376 64q12.75 25.5 12.75 54.5 0 21.75-6.75 42 34 40 34 99.5z"/></svg>
        
      </defs>
    </svg>
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" data-md-component="overlay" for="__drawer"></label>
    
      <a href="#arcus-basic-concept" tabindex="1" class="md-skip">
        Skip to content
      </a>
    
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href="../../../.." title="arcus docs" class="md-header-nav__button md-logo">
          
            <i class="md-icon"></i>
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="__drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
          
            <span class="md-header-nav__topic">
              arcus docs
            </span>
            <span class="md-header-nav__topic">
              
                Arcus basic concept
              
            </span>
          
        </div>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        
          <label class="md-icon md-icon--search md-header-nav__button" for="__search"></label>
          
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query" data-md-state="active">
      <label class="md-icon md-search__icon" for="__search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset" tabindex="-1">
        &#xE5CD;
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result">
          <div class="md-search-result__meta">
            Type to start searching
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
        
      </div>
      
        <div class="md-flex__cell md-flex__cell--shrink">
          <div class="md-header-nav__source">
            


  

<a href="https://github.com/naver/arcus/" title="Go to repository" class="md-source" data-md-source="github">
  
    <div class="md-source__icon">
      <svg viewBox="0 0 24 24" width="24" height="24">
        <use xlink:href="#__github" width="24" height="24"></use>
      </svg>
    </div>
  
  <div class="md-source__repository">
    naver/arcus
  </div>
</a>
          </div>
        </div>
      
    </div>
  </nav>
</header>
    
    <div class="md-container">
      
        
      
      
        

  

<nav class="md-tabs md-tabs--active" data-md-component="tabs">
  <div class="md-tabs__inner md-grid">
    <ul class="md-tabs__list">
      
        
  <li class="md-tabs__item">
    
      <a href="../../../.." class="md-tabs__link">
        Home
      </a>
    
  </li>

      
        
  
  
    
    
  
  
    
    
  
  
    <li class="md-tabs__item">
      
        <a href="../../1.12 (latest)/arcus-basic-concept/" class="md-tabs__link">
          Arcus server
        </a>
      
    </li>
  

  

  

      
    </ul>
  </div>
</nav>
      
      <main class="md-main" role="main">
        <div class="md-main__inner md-grid" data-md-component="container">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="__drawer">
    <a href="../../../.." title="arcus docs" class="md-nav__button md-logo">
      
        <i class="md-icon"></i>
      
    </a>
    arcus docs
  </label>
  
    <div class="md-nav__source">
      


  

<a href="https://github.com/naver/arcus/" title="Go to repository" class="md-source" data-md-source="github">
  
    <div class="md-source__icon">
      <svg viewBox="0 0 24 24" width="24" height="24">
        <use xlink:href="#__github" width="24" height="24"></use>
      </svg>
    </div>
  
  <div class="md-source__repository">
    naver/arcus
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href="../../../.." title="Home" class="md-nav__link">
      Home
    </a>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-2" type="checkbox" id="nav-2" checked>
    
    <label class="md-nav__link" for="nav-2">
      Arcus server
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-2">
        Arcus server
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-2-1" type="checkbox" id="nav-2-1" checked>
    
    <label class="md-nav__link" for="nav-2-1">
      arcus server
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-2-1">
        arcus server
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-2-1-1" type="checkbox" id="nav-2-1-1">
    
    <label class="md-nav__link" for="nav-2-1-1">
      1.12 (latest)
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="3">
      <label class="md-nav__title" for="nav-2-1-1">
        1.12 (latest)
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../1.12 (latest)/arcus-basic-concept/" title="Arcus basic concept" class="md-nav__link">
      Arcus basic concept
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../1.12 (latest)/arcus-collection-concept/" title="Arcus collection concept" class="md-nav__link">
      Arcus collection concept
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../1.12 (latest)/arcus-item-attribute/" title="Arcus item attribute" class="md-nav__link">
      Arcus item attribute
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../1.12 (latest)/command-administration/" title="Admin & Monitoring 명령" class="md-nav__link">
      Admin & Monitoring 명령
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../1.12 (latest)/command-btree-collection/" title="Command btree collection" class="md-nav__link">
      Command btree collection
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../1.12 (latest)/command-item-attribute/" title="Command item attribute" class="md-nav__link">
      Command item attribute
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../1.12 (latest)/command-key-value/" title="Command key value" class="md-nav__link">
      Command key value
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../1.12 (latest)/command-list-collection/" title="LIST 명령" class="md-nav__link">
      LIST 명령
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../1.12 (latest)/command-map-collection/" title="MAP 명령" class="md-nav__link">
      MAP 명령
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../1.12 (latest)/command-pipelining/" title="Command pipelining" class="md-nav__link">
      Command pipelining
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../1.12 (latest)/command-set-collection/" title="SET 명령" class="md-nav__link">
      SET 명령
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-2-1-2" type="checkbox" id="nav-2-1-2" checked>
    
    <label class="md-nav__link" for="nav-2-1-2">
      1.11 (stable)
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="3">
      <label class="md-nav__title" for="nav-2-1-2">
        1.11 (stable)
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../arcus-ascii-protocol/" title="Arcus ascii protocol" class="md-nav__link">
      Arcus ascii protocol
    </a>
  </li>

        
          
          
          

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-toggle md-nav__toggle" data-md-toggle="toc" type="checkbox" id="__toc">
    
    
      <label class="md-nav__link md-nav__link--active" for="__toc">
        Arcus basic concept
      </label>
    
    <a href="./" title="Arcus basic concept" class="md-nav__link md-nav__link--active">
      Arcus basic concept
    </a>
    
      
<nav class="md-nav md-nav--secondary">
  
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#arcus-basic-concept" class="md-nav__link">
    Arcus Basic Concept
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_1" class="md-nav__link">
    기본 제약 사항
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cache-key" class="md-nav__link">
    Cache Key
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cache-item" class="md-nav__link">
    Cache Item
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#expiration-eviction-and-sticky" class="md-nav__link">
    Expiration, Eviction, and Sticky
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#memory-allocator" class="md-nav__link">
    Memory Allocator
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#slab-class-lru" class="md-nav__link">
    Slab Class 별 LRU 리스트
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
    
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../arcus-collection-concept/" title="Arcus collection concept" class="md-nav__link">
      Arcus collection concept
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../arcus-item-attribute/" title="Arcus item attribute" class="md-nav__link">
      Arcus item attribute
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../command-administration/" title="Command administration" class="md-nav__link">
      Command administration
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../command-btree-collection/" title="Command btree collection" class="md-nav__link">
      Command btree collection
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../command-item-attribute/" title="Command item attribute" class="md-nav__link">
      Command item attribute
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../command-key-value/" title="Command key value" class="md-nav__link">
      Command key value
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../command-list-collection/" title="Command list collection" class="md-nav__link">
      Command list collection
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../command-map-collection/" title="Command map collection" class="md-nav__link">
      Command map collection
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../command-pipelining/" title="Command pipelining" class="md-nav__link">
      Command pipelining
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../command-set-collection/" title="Command set collection" class="md-nav__link">
      Command set collection
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary">
  
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#arcus-basic-concept" class="md-nav__link">
    Arcus Basic Concept
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_1" class="md-nav__link">
    기본 제약 사항
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cache-key" class="md-nav__link">
    Cache Key
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cache-item" class="md-nav__link">
    Cache Item
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#expiration-eviction-and-sticky" class="md-nav__link">
    Expiration, Eviction, and Sticky
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#memory-allocator" class="md-nav__link">
    Memory Allocator
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#slab-class-lru" class="md-nav__link">
    Slab Class 별 LRU 리스트
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                  <a href="https://github.com/naver/arcus/edit/master/docs/arcus-server/arcus-ascii-protocol/1.11 (stable)/arcus-basic-concept.md" title="Edit this page" class="md-icon md-content__icon">&#xE3C9;</a>
                
                
                  <h1>Arcus basic concept</h1>
                
                <h2 id="arcus-basic-concept">Arcus Basic Concept</h2>
<p>Arcus cache server는 하나의 데이터만을 value로 가지는 simple key-value 외에도
여러 데이터를 구조화된 형태로 저장하는 collection을 하나의 value로 가지는
확장된 key-value 데이터 모델을 제공한다.</p>
<h3 id="_1">기본 제약 사항</h3>
<p>Arcus cache server의 key-value 모델은 아래의 기본 제약 사항을 가진다.</p>
<ul>
<li>기존 key-value 모델의 제약 사항</li>
<li>Key의 최대 크기는 32000 character이다. (arcus-memcached 1.11 이후 버전)<ul>
<li>기존 버전에서 key 최대 크기는 250 character이다.</li>
</ul>
</li>
<li>Value의 최대 크기는 1MB(trailing 문자인 “\r\n” 포함한 길이) 이다.</li>
<li>Collection 제약 사항</li>
<li>하나의 collection에 들어갈 수 있는 최대 element 개수는 50,000개이다.</li>
<li>Collection의 각 element가 가지는 value의 최대 크기는 4KB(trailing 문자인 “\r\n” 포함한 길이) 이다.</li>
</ul>
<h3 id="cache-key">Cache Key</h3>
<p>Cache key는 Arcus cache server에 저장할 데이터를 대표하는 코드이다. Cache key 형식은 아래와 같다.</p>
<pre><code>  Cache Key : [&lt;prefix&gt;:]&lt;subkey&gt;
</code></pre>

<ul>
<li>\&lt;prefix> - Cache key의 앞에 붙는 namespace이다.</li>
<li>Prefix 단위로 cache server에 저장된 key들을 그룹화하여 flush하거나 통계 정보를 볼 수 있다.</li>
<li>Prefix를 생략할 수도 있지만, 가급적 사용하길 권한다.</li>
<li>delimiter - Prefix와 subkey를 구분하는 문자로 default delimiter는 콜론(‘:’)이다.</li>
<li>\&lt;subkey> - 일반적으로 응용에서 사용하는 Key이다.</li>
</ul>
<p>Prefix와 subkey는 명명 규칙을 가지므로 주의하여야 한다.
Prefix는 영문 대소문자, 숫자, 언더바(_), 하이픈(-), 플러스(+), 점(.) 문자만으로 구성될 수 있으며,
이 중에 하이픈(-)은 prefix 명의 첫번째 문자로 올 수 없는 제약이 있다.
Subkey는 공백을 포함할 수 없으며, 기본적으로 alphanumeric만을 사용하길 권장한다.</p>
<h3 id="cache-item">Cache Item</h3>
<p>Arcus cache server는 simple key-value 외에 collection 지원으로 다양한 item 유형을 가진다.</p>
<ul>
<li>simple key-value item - 기존 key-value item</li>
<li>collection item</li>
<li>list item - 데이터들의 linked list을 value가지는 item</li>
<li>set item - 유일한 데이터들의 집합을 value로 가지는 item</li>
<li>map item - \&lt;field, value>쌍으로 구성된 데이터 집합을 value로 가지는 item </li>
<li>b+tree item - b+tree key 기반으로 정렬된 데이터 집합을 value로 가지는 item</li>
</ul>
<h3 id="expiration-eviction-and-sticky">Expiration, Eviction, and Sticky</h3>
<p>각 cache item은 expiration time 속성을 가지며,
이 값의 설정을 통해 expire되지 않는 item 또는 특정 시간 이후에 자동 expire될 item을 지정할 수 있다.
이에 대한 자세한 설명은 <a href="../arcus-item-attribute/">Item Attribute 설명</a>을 참고 바란다.</p>
<p>Arcus cache server는 memory cache이며, 한정된 메모리 공간을 사용하여 데이터를 caching한다.
메모리 공간이 모두 사용된 상태에서 새로운 item 저장 요청이 들어올 경우,
Arcus cache server는 "out of memory" 오류를 내거나 LRU 기반의 eviction 방식
즉, 가장 오랫동안 접근되지 않은 item을 제거하고 새로운 item 저장을 허용하는 방식을 사용한다.
이러한 동작 방식은 Arcus cache server의 -M 구동 옵션을 지정 가능하며,
default로는 LRU 기반의 eviction 방식을 사용한다.</p>
<p>특정 응용에서는 어떤 item이 expire &amp; evict 대상이 되지 않기를 원하는 경우도 있다.
Arcus cache server는 이러한 item을 sticky item이라 하며, 
expiration time을 -1로 지정하면, sticky item으로 지원한다.
Sticky item의 삭제는 전적으로 응용에 의해 관리되어야 함을 주의해야 한다.</p>
<p>Sticky items은 일반적으로 많지 않을 것으로 예상하지만,
응용의 실수로 인해 sticky item들이 Arcus 서버의 전체 메모리 공간을 차지하게 되는 경우를 방지하기 위하여,
전체 메모리 공간의 일부만이 sticky items에 의해 사용되도록 설정하는 -g(gummed or sticky) 구동 옵션을 제공한다.
Sticky items의 메모리 공간으로 사용될 메모리 비율이며, 0 ~ 100 범위의 값으로 지정가능하다.
디폴트인 0은 sticky items을 허용하지 않는다는 것이며,
100은 전체 메모리를 sticky items 저장 용도로 사용할 수 있음을 의미한다.</p>
<h3 id="memory-allocator">Memory Allocator</h3>
<p>Arcus cache server는 item 메모리 공간의 할당과 반환을 효율적으로 관리할 목적으로
두 가지 memory allocator를 사용한다.</p>
<p><strong>Slab Allocator</strong></p>
<p>Slab allocator는 메모리 크기 별로 메모리 공간을 나누어 관리하기 위해 slab class로 구분하고,
각 slab class에서 동일 크기의 메모리 공간들인 slab들을 free list 형태로 관리하면서
그 크기의 메모리 공간의 할당과 반환을 신속히 처리해 주는 memory allocator이다.
기존 memcached에서 사용되던 대표적인 memory allocator이다.</p>
<p>최대 slab 크기는 현재 1MB이다. 최소 slab 크기 즉, 첫 번째 slab class의 slab 크기와
그 다음 slab class들의 slab 크기는 아래의 Arcus cache server 구동 옵션으로 설정한다.</p>
<ul>
<li>-n \&lt;bytes> : minimum space allocated from key+value+flags (default: 48)</li>
<li>최소 크기의 slab 크기를 결정한다.</li>
<li>-f \&lt;factor> : chunk size growth factor (default: 1.25)</li>
<li>Slab class 별로 slab 크기의 증가 정도를 지정하며, 1.0보다 큰 값으로 지정해야 한다.</li>
</ul>
<p><strong>Small Memory Allocator</strong></p>
<p>Collection 지원으로 인해 작은 메모리 공간의 할당과 반환 요청이 많아졌다.
이러한 작은 메모리 공간을 효율적으로 관리하기 위하여
small memory allocator를 새로 개발하여 사용하고 있다.
8000 바이트 이하의 메모리 공간은 small memory allocator가 담당하며,
8000 바이트 초과의 메모리 공간은 기존 slab allocator가 담당한다.</p>
<h3 id="slab-class-lru">Slab Class 별 LRU 리스트</h3>
<p>Arcus cache server는 slab class 별 LRU 리스트를 유지하고,
eviction 대상 item으로 오랫동안 접근되지 않은 item이 선택될 수 있게 한다.</p>
<p>Small memory allocator 추가로 인해, slab class 별 LRU 리스트에 변동 사항이 있다.
특별히, 0번 slab class를 두어 small memory allocator가 사용하고 있으며,
small memory allocator로 부터 메모리 공간을 할당받는
작은 크기의 key-value items과 collection items은 0번 LRU 리스트에 연결된다.
따라서, 8000 바이트 이하의 메모리 공간에 해당하는
기존 slab class의 LRU 리스트들은 empty가 상태가 된다.</p>
                
                  
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
        
          <a href="../arcus-ascii-protocol/" title="Arcus ascii protocol" class="md-flex md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
            </div>
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                Arcus ascii protocol
              </span>
            </div>
          </a>
        
        
          <a href="../arcus-collection-concept/" title="Arcus collection concept" class="md-flex md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                Arcus collection concept
              </span>
            </div>
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
        powered by
        <a href="https://www.mkdocs.org">MkDocs</a>
        and
        <a href="https://squidfunk.github.io/mkdocs-material/">
          Material for MkDocs</a>
      </div>
      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../../../../assets/javascripts/application.ac79c3b0.js"></script>
      
      <script>app.initialize({version:"1.0.4",url:{base:"../../../.."}})</script>
      
    
  </body>
</html>