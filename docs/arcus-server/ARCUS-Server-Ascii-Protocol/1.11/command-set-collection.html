<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><title>arcus-server/ARCUS-Server-Ascii-Protocol/1.11/command-set-collection · ARCUS DOCUMENT</title><meta name="viewport" content="width=device-width"/><meta name="generator" content="Docusaurus"/><meta name="description" content="SET 명령"/><meta name="docsearch:language" content="en"/><meta property="og:title" content="arcus-server/ARCUS-Server-Ascii-Protocol/1.11/command-set-collection · ARCUS DOCUMENT"/><meta property="og:type" content="website"/><meta property="og:url" content="https://wwww.jam2in.com/index.html"/><meta property="og:description" content="SET 명령"/><meta property="og:image" content="https://wwww.jam2in.com/img/undraw_online.svg"/><meta name="twitter:card" content="summary"/><meta name="twitter:image" content="https://wwww.jam2in.com/img/undraw_tweetstorm.svg"/><link rel="shortcut icon" href="/img/favicon.ico"/><link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css"/><script type="text/javascript" src="https://buttons.github.io/buttons.js"></script><script src="/js/scrollSpy.js"></script><link rel="stylesheet" href="/css/main.css"/><script src="/js/codetabs.js"></script></head><body class="sideNavVisible separateOnPageNav"><div class="fixedHeaderContainer"><div class="headerWrapper wrapper"><header><a href="/"><img class="logo" src="/img/favicon.ico" alt="ARCUS DOCUMENT"/><h2 class="headerTitleWithLogo">ARCUS DOCUMENT</h2></a><div class="navigationWrapper navigationSlider"><nav class="slidingNav"><ul class="nav-site nav-site-internal"></ul></nav></div></header></div></div><div class="navPusher singleRowMobileNav"><div class="docMainWrapper wrapper"><div class="container mainContainer docsContainer"><div class="wrapper"><div class="post"><header class="postHeader"><h1 id="__docusaurus" class="postHeaderTitle">arcus-server/ARCUS-Server-Ascii-Protocol/1.11/command-set-collection</h1></header><article><div><span><h2><a class="anchor" aria-hidden="true" id="set-명령"></a><a href="#set-명령" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>SET 명령</h2>
<p>Set collection에 관한 명령은 아래와 같다.</p>
<ul>
<li><a href="/docs/arcus-server/ARCUS-Server-Ascii-Protocol/1.11/command-set-collection.html#sop-create---set-collection-%EC%83%9D%EC%84%B1">Set collection 생성: sop create</a></li>
<li>Set collection 삭제: delete (기존 key-value item의 삭제 명령을 그대로 사용)</li>
</ul>
<p>Set element에 관한 명령은 아래와 같다.</p>
<ul>
<li><a href="/docs/arcus-server/ARCUS-Server-Ascii-Protocol/1.11/command-set-collection.html#sop-insert---set-element-%EC%82%BD%EC%9E%85">Set element 삽입: sop insert</a></li>
<li><a href="/docs/arcus-server/ARCUS-Server-Ascii-Protocol/1.11/command-set-collection.html#sop-delete---set-element-%EC%82%AD%EC%A0%9C">Set element 삭제: sop delete</a></li>
<li><a href="/docs/arcus-server/ARCUS-Server-Ascii-Protocol/1.11/command-set-collection.html#sop-get---set-element-%EC%A1%B0%ED%9A%8C">Set element 조회: sop get</a></li>
<li><a href="/docs/arcus-server/ARCUS-Server-Ascii-Protocol/1.11/command-set-collection.html#sop-exist---set-element-%EC%A1%B4%EC%9E%AC%EC%9C%A0%EB%AC%B4-%EA%B2%80%EC%82%AC">Set element 존재유무 검사: sop exist</a></li>
</ul>
<h3><a class="anchor" aria-hidden="true" id="sop-create---set-collection-생성"></a><a href="#sop-create---set-collection-생성" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>sop create - Set Collection 생성</h3>
<p>Set collection을 empty 상태로 생성한다.</p>
<pre><code class="hljs">sop create &lt;key&gt; &lt;attributes&gt; [noreply]\r\n
* &lt;attributes&gt;: &lt;flags&gt; &lt;exptime&gt; &lt;maxcount&gt; <span class="hljs-meta">[&lt;ovflaction&gt;]</span> [unreadable]
</code></pre>
<ul>
<li>&lt;key&gt; - 대상 item의 key string</li>
<li>&lt;attributes&gt; - 설정할 item attributes. <a href="/docs/arcus-server/ARCUS-Server-Ascii-Protocol/1.11/arcus-item-attribute.html">Item Attribute 설명</a>을 참조 바란다.</li>
<li>noreply - 명시하면, response string을 전달받지 않는다.</li>
</ul>
<p>Response string과 그 의미는 아래와 같다.</p>
<ul>
<li>&quot;CREATED&quot; - 성공</li>
<li>&quot;EXISTS&quot; - 동일 key string을 가진 item이 이미 존재</li>
<li>&quot;NOT_SUPPORTED&quot; - 지원하지 않음</li>
<li>“CLIENT_ERROR bad command line format” - protocol syntax 틀림</li>
<li>“SERVER_ERROR out of memory” - 메모리 부족</li>
</ul>
<h3><a class="anchor" aria-hidden="true" id="sop-insert---set-element-삽입"></a><a href="#sop-insert---set-element-삽입" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>sop insert - Set Element 삽입</h3>
<p>Set collection에 하나의 element를 삽입한다.
Set collection을 생성하면서 하나의 element를 삽입할 수도 있다.</p>
<pre><code class="hljs">sop insert &lt;key&gt; &lt;bytes&gt; [create &lt;attributes&gt;] [noreply|pipe]\r\n&lt;data&gt;\r\n
* &lt;attributes&gt;: &lt;flags&gt; &lt;exptime&gt; &lt;maxcount&gt; <span class="hljs-meta">[&lt;ovflaction&gt;]</span> [unreadable]
</code></pre>
<ul>
<li>&lt;key&gt; - 대상 item의 key string</li>
<li>&lt;bytes&gt; - 삽입할 데이터 길이 (trailing 문자인 &quot;\r\n&quot;을 제외한 길이)</li>
<li>create &lt;attributes&gt; - set collection 없을 시에 set 생성 요청.
<a href="/docs/arcus-server/ARCUS-Server-Ascii-Protocol/1.11/arcus-item-attribute.html">Item Attribute 설명</a>을 참조 바란다.</li>
<li>noreply or pipe - 명시하면, response string을 전달받지 않는다.
pipe 사용은 <a href="/docs/arcus-server/ARCUS-Server-Ascii-Protocol/1.11/command-pipelining.html">Command Pipelining</a>을 참조 바란다.</li>
<li>&lt;data&gt; - 삽입할 데이터 (최대 4KB)</li>
</ul>
<p>Response string과 그 의미는 아래와 같다.</p>
<ul>
<li>&quot;STROED&quot; - 성공 (element만 삽입)</li>
<li>“CREATED_STORED” - 성공 (collection 생성하고 element 삽입)</li>
<li>“NOT_FOUND” - key miss</li>
<li>“TYPE_MISMATCH” - 해당 item이 set collection이 아님</li>
<li>“OVERFLOWED” - overflow 발생</li>
<li>&quot;ELEMENT_EXISTS&quot; - 동일 데이터를 가진 element가 존재. set uniqueness 위배</li>
<li>&quot;NOT_SUPPORTED&quot; - 지원하지 않음</li>
<li>“CLIENT_ERROR bad command line format” - protocol syntax 틀림</li>
<li>“CLIENT_ERROR too large value” - 삽입할 데이터가 4KB 보다 큼</li>
<li>“CLIENT_ERROR bad data chunk” - 삽입할 데이터 길이가 &lt;bytes&gt;와 다르거나 &quot;\r\n&quot;으로 끝나지 않음</li>
<li>“SERVER_ERROR out of memory” - 메모리 부족</li>
</ul>
<h3><a class="anchor" aria-hidden="true" id="sop-delete---set-element-삭제"></a><a href="#sop-delete---set-element-삭제" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>sop delete - Set Element 삭제</h3>
<p>Set collection에서 하나의 element를 삭제한다.</p>
<pre><code class="hljs">sop <span class="hljs-keyword">delete</span> &lt;<span class="hljs-keyword">key</span>&gt; &lt;<span class="hljs-keyword">bytes</span>&gt; [<span class="hljs-keyword">drop</span>] [noreply|<span class="hljs-keyword">pipe</span>]\r\n&lt;<span class="hljs-keyword">data</span>&gt;\r\n
</code></pre>
<ul>
<li>&lt;key&gt; - 대상 item의 key string</li>
<li>&lt;bytes&gt; - 삭제할 데이터 길이 (trailing 문자인 &quot;\r\n&quot;을 제외한 길이)</li>
<li>drop - element 삭제로 인해 empty set이 될 경우, 그 set을 drop할 것인지를 지정한다.</li>
<li>noreply or pipe - 명시하면, response string을 전달받지 않는다.
pipe 사용은 <a href="/doc/command-pipelining.md">Command Pipelining</a>을 참조 바란다.</li>
<li>&lt;data&gt; - 삭제할 데이터 (최대 4KB)</li>
</ul>
<p>Response string과 그 의미는 아래와 같다.</p>
<ul>
<li>&quot;DELETED&quot; - 성공 (element만 삭제)</li>
<li>“DELETED_DROPPED” - 성공 (element 삭제하고 collection을 drop한 상태)</li>
<li>“NOT_FOUND” - key miss</li>
<li>“NOT_FOUND_ELEMENT” - element miss (삭제할 element가 없음)</li>
<li>“TYPE_MISMATCH” - 해당 item이 set collection이 아님</li>
<li>&quot;NOT_SUPPORTED&quot; - 지원하지 않음</li>
<li>“CLIENT_ERROR bad command line format” - protocol syntax 틀림</li>
<li>“CLIENT_ERROR too large value” - 삭제할 데이터가 4KB 보다 큼</li>
<li>“CLIENT_ERROR bad data chunk” - 삭제할 데이터의 길이가 &lt;bytes&gt;와 다르거나 “\r\n”으로 끝나지 않음</li>
</ul>
<h3><a class="anchor" aria-hidden="true" id="sop-get---set-element-조회"></a><a href="#sop-get---set-element-조회" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>sop get - Set Element 조회</h3>
<p>Set collection에서 N 개의 elements를 조회한다.</p>
<pre><code class="hljs">sop <span class="hljs-built_in">get</span> <span class="hljs-symbol">&lt;key&gt;</span> <span class="hljs-symbol">&lt;count&gt;</span> [<span class="hljs-keyword">delete</span>|<span class="hljs-keyword">drop</span>]\r\n
</code></pre>
<ul>
<li>&lt;key&gt; - 대상 item의 key string</li>
<li>&lt;count&gt; - 조회할 elements 개수를 지정. 0이면 전체 elements를 의미한다.</li>
<li>delete or drop - element 조회하면서 그 element를 delete할 것인지
그리고 delete로 인해 empty set이 될 경우 그 set을 drop할 것인지를 지정한다.</li>
</ul>
<p>성공 시의 response string은 아래와 같다.
VALUE 라인의 &lt;count&gt;는 조회된 element 개수를 의미한다.
마지막 라인은 END, DELETED, DELETED_DROPPED 중의 하나를 가지며
각각 element 조회만 수행한 상태, element 조회하고 삭제한 상태,
element 조회 및 삭제하고 set을 drop한 상태를 의미한다.</p>
<pre><code class="hljs">VALUE <span class="hljs-variable">&lt;flags&gt;</span> <span class="hljs-variable">&lt;count&gt;</span>\r\n
<span class="hljs-variable">&lt;bytes&gt;</span> <span class="hljs-variable">&lt;data&gt;</span>\r\n
<span class="hljs-variable">&lt;bytes&gt;</span> <span class="hljs-variable">&lt;data&gt;</span>\r\n
<span class="hljs-variable">&lt;bytes&gt;</span> <span class="hljs-variable">&lt;data&gt;</span>\r\n
...
END|<span class="hljs-string">DELETED</span>|<span class="hljs-string">DELETED_DROPPED\r\n
</span></code></pre>
<p>실패 시의 response string과 그 의미는 아래와 같다.</p>
<ul>
<li>“NOT_FOUND”   - key miss</li>
<li>“NOT_FOUND_ELEMENT”   - element miss (element가 존재하지 않는 상태임)</li>
<li>“TYPE_MISMATCH”   - 해당 item이 set collection이 아님</li>
<li>“UNREADABLE” - 해당 item이 unreadable item임</li>
<li>&quot;NOT_SUPPORTED&quot; - 지원하지 않음</li>
<li>“CLIENT_ERROR bad command line format” - protocol syntax 틀림</li>
<li>&quot;SERVER_ERROR out of memory [writing get response]”   - 메모리 부족</li>
</ul>
<h3><a class="anchor" aria-hidden="true" id="sop-exist---set-element-존재유무-검사"></a><a href="#sop-exist---set-element-존재유무-검사" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>sop exist - Set Element 존재유무 검사</h3>
<p>Set collection에 특정 element의 존재 유무를 검사한다.</p>
<pre><code class="hljs">sop exist &lt;key&gt; &lt;bytes&gt; [pipe]<span class="hljs-symbol">\r</span><span class="hljs-symbol">\n</span>&lt;data&gt;<span class="hljs-symbol">\r</span><span class="hljs-symbol">\n</span>
</code></pre>
<ul>
<li>&lt;key&gt; - 대상 item의 key string</li>
<li>&lt;bytes&gt;와 &lt;data&gt; - 존재 유무를 검사할 데이터의 길이와 데이터 그 자체 (최대 4KB)</li>
<li>pipe - 명시하면, response string을 전달받지 않는다.
<a href="scommand-pipelining.md">Command Pipelining</a>을 참조 바란다.</li>
</ul>
<p>Response string과 그 의미는 아래와 같다.</p>
<ul>
<li>“EXIST&quot; - 성공 (주어진 데이터가 set에 존재)</li>
<li>&quot;NOT_EXIST&quot; - 성공 (주어진 데이터가 set에 존재하지 않음)</li>
<li>“NOT_FOUND”   - key miss</li>
<li>“TYPE_MISMATCH”   - 해당 item이 set collection이 아님</li>
<li>“UNREADABLE” - 해당 item이 unreadable item임</li>
<li>&quot;NOT_SUPPORTED&quot; - 지원하지 않음</li>
<li>“CLIENT_ERROR bad command line format” - protocol syntax 틀림</li>
<li>“CLIENT_ERROR too large value” : 주어진 데이터가 4KB 보다 큼</li>
<li>“CLIENT_ERROR bad data chunk” : 주어진 데이터의 길이가 &lt;bytes&gt;와 다르거나 “\r\n”으로 끝나지 않음</li>
</ul>
</span></div></article></div><div class="docs-prevnext"></div></div></div><nav class="onPageNav"><ul class="toc-headings"><li><a href="#set-명령">SET 명령</a><ul class="toc-headings"><li><a href="#sop-create---set-collection-생성">sop create - Set Collection 생성</a></li><li><a href="#sop-insert---set-element-삽입">sop insert - Set Element 삽입</a></li><li><a href="#sop-delete---set-element-삭제">sop delete - Set Element 삭제</a></li><li><a href="#sop-get---set-element-조회">sop get - Set Element 조회</a></li><li><a href="#sop-exist---set-element-존재유무-검사">sop exist - Set Element 존재유무 검사</a></li></ul></li></ul></nav></div></div></body></html>