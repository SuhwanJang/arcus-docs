<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><title>arcus-server/ARCUS-Server-Ascii-Protocol/1.11/command-map-collection · ARCUS DOCUMENT</title><meta name="viewport" content="width=device-width"/><meta name="generator" content="Docusaurus"/><meta name="description" content="MAP 명령"/><meta name="docsearch:language" content="en"/><meta property="og:title" content="arcus-server/ARCUS-Server-Ascii-Protocol/1.11/command-map-collection · ARCUS DOCUMENT"/><meta property="og:type" content="website"/><meta property="og:url" content="https://wwww.jam2in.com/index.html"/><meta property="og:description" content="MAP 명령"/><meta property="og:image" content="https://wwww.jam2in.com/img/undraw_online.svg"/><meta name="twitter:card" content="summary"/><meta name="twitter:image" content="https://wwww.jam2in.com/img/undraw_tweetstorm.svg"/><link rel="shortcut icon" href="/img/favicon.ico"/><link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css"/><script type="text/javascript" src="https://buttons.github.io/buttons.js"></script><script src="/js/scrollSpy.js"></script><link rel="stylesheet" href="/css/main.css"/><script src="/js/codetabs.js"></script></head><body class="sideNavVisible separateOnPageNav"><div class="fixedHeaderContainer"><div class="headerWrapper wrapper"><header><a href="/"><img class="logo" src="/img/favicon.ico" alt="ARCUS DOCUMENT"/><h2 class="headerTitleWithLogo">ARCUS DOCUMENT</h2></a><div class="navigationWrapper navigationSlider"><nav class="slidingNav"><ul class="nav-site nav-site-internal"></ul></nav></div></header></div></div><div class="navPusher singleRowMobileNav"><div class="docMainWrapper wrapper"><div class="container mainContainer docsContainer"><div class="wrapper"><div class="post"><header class="postHeader"><h1 id="__docusaurus" class="postHeaderTitle">arcus-server/ARCUS-Server-Ascii-Protocol/1.11/command-map-collection</h1></header><article><div><span><h2><a class="anchor" aria-hidden="true" id="map-명령"></a><a href="#map-명령" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>MAP 명령</h2>
<p>Map collection에 관한 명령은 아래와 같다.</p>
<ul>
<li><a href="/docs/arcus-server/ARCUS-Server-Ascii-Protocol/1.11/command-map-collection.html#mop-create---map-collection-생성">Map collection 생성: mop create</a></li>
<li>Map collection 삭제: delete (기존 key-value item의 삭제 명령을 그대로 사용)</li>
</ul>
<p>Map element에 관한 명령은 아래와 같다.</p>
<ul>
<li><a href="/docs/arcus-server/ARCUS-Server-Ascii-Protocol/1.11/command-map-collection.html#mop-insert---map-element-삽입">Map element 삽입: mop insert</a></li>
<li><a href="/docs/arcus-server/ARCUS-Server-Ascii-Protocol/1.11/command-map-collection.html#mop-update---map-element-변경">Map element 변경: mop update</a></li>
<li><a href="/docs/arcus-server/ARCUS-Server-Ascii-Protocol/1.11/command-map-collection.html#mop-delete---map-element-삭제">Map element 삭제: mop delete</a></li>
<li><a href="/docs/arcus-server/ARCUS-Server-Ascii-Protocol/1.11/command-map-collection.html#mop-get---map-field-element-조회">Map element 조회: mop get</a></li>
</ul>
<h3><a class="anchor" aria-hidden="true" id="mop-create---map-collection-생성"></a><a href="#mop-create---map-collection-생성" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>mop create - Map Collection 생성</h3>
<p>Map collection을 empty 상태로 생성한다.</p>
<pre><code class="hljs">mop create &lt;key&gt; &lt;attributes&gt; [noreply]\r\n
* &lt;attributes&gt;: &lt;flags&gt; &lt;exptime&gt; &lt;maxcount&gt; <span class="hljs-meta">[&lt;ovflaction&gt;]</span> [unreadable]
</code></pre>
<ul>
<li>&lt; key &gt; - 대상 item의 key string</li>
<li>&lt;attributes&gt; - 설정할 item attributes. <a href="/docs/arcus-server/ARCUS-Server-Ascii-Protocol/1.11/arcus-item-attribute.html">Item Attribute 설명</a>을 참조 바란다.</li>
<li>noreply - 명시하면, response string을 전달받지 않는다.</li>
</ul>
<p>Response string과 그 의미는 아래와 같다.</p>
<ul>
<li>&quot;CREATED&quot; - 성공</li>
<li>&quot;EXISTS&quot; - 동일 key string을 가진 item이 이미 존재</li>
<li>&quot;NOT_SUPPORTED&quot; - 지원하지 않음</li>
<li>“CLIENT_ERROR bad command line format” - protocol syntax 틀림</li>
<li>“SERVER_ERROR out of memory” - 메모리 부족</li>
</ul>
<h3><a class="anchor" aria-hidden="true" id="mop-insert---map-element-삽입"></a><a href="#mop-insert---map-element-삽입" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>mop insert - Map Element 삽입</h3>
<p>Map collection에 하나의 field, element를 삽입한다.
Map collection을 생성하면서 &lt;field, value&gt;로 구성된 하나의 element를 삽입할 수도 있다.</p>
<pre><code class="hljs">mop <span class="hljs-keyword">insert</span> <span class="hljs-symbol">&lt;key&gt;</span> <span class="hljs-symbol">&lt;field&gt;</span> <span class="hljs-symbol">&lt;bytes&gt;</span> [create <span class="hljs-symbol">&lt;attributes&gt;</span>] [noreply|pipe]\r\n<span class="hljs-symbol">&lt;data&gt;</span>\r\n
* <span class="hljs-symbol">&lt;attributes&gt;</span>: <span class="hljs-symbol">&lt;flags&gt;</span> <span class="hljs-symbol">&lt;exptime&gt;</span> <span class="hljs-symbol">&lt;maxcount&gt;</span> [<span class="hljs-symbol">&lt;ovflaction&gt;</span>] [unreadable]
</code></pre>
<ul>
<li>&lt;key&gt; - 대상 item의 key string</li>
<li>&lt;field&gt; - 삽입할 element의 field string</li>
<li>&lt;bytes&gt; - 삽입할 element의 데이터 길이 (trailing 문자인 &quot;\r\n&quot;을 제외한 길이)</li>
<li>create &lt;attributes&gt; - 해당 map collection 없을 시에 map 생성 요청.
<a href="/arcus-item-attribute.md">Item Attribute 설명</a>을 참조 바란다.</li>
<li>noreply or pipe - 명시하면, response string을 전달받지 않는다.
pipe 사용은 <a href="/command-pipelining.md">Command Pipelining</a>을 참조 바란다.</li>
<li>&lt;data&gt; - 삽입할 데이터 (최대 4KB)</li>
</ul>
<p>Response string과 그 의미는 아래와 같다.</p>
<ul>
<li>&quot;STROED&quot; - 성공 (field, element 삽입)</li>
<li>“CREATED_STORED” - 성공 (collection 생성하고 field, element 삽입)</li>
<li>“NOT_FOUND” - key miss</li>
<li>“TYPE_MISMATCH” - 해당 item이 map collection이 아님</li>
<li>“OVERFLOWED” - overflow 발생</li>
<li>&quot;ELEMENT_EXISTS&quot; - 동일 이름의 field가 이미 존재. map field uniqueness 위배</li>
<li>&quot;NOT_SUPPORTED&quot; - 지원하지 않음</li>
<li>“CLIENT_ERROR bad command line format” - protocol syntax 틀림</li>
<li>“CLIENT_ERROR too large value” - 삽입할 데이터가 4KB 보다 큼</li>
<li>“CLIENT_ERROR bad data chunk” - 삽입할 데이터 길이가 &lt;bytes&gt;와 다르거나 &quot;\r\n&quot;으로 끝나지 않음</li>
<li>“CLIENT_ERROR invalid prefix name” - 유효하지(존재하지) 않는 prefix 명</li>
<li>“SERVER_ERROR out of memory” - 메모리 부족</li>
</ul>
<h3><a class="anchor" aria-hidden="true" id="mop-update---map-element-변경"></a><a href="#mop-update---map-element-변경" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>mop update - Map Element 변경</h3>
<p>Map collection에서 하나의 field에 대해 element 변경을 수행한다.
현재 다수 field에 대한 변경연산은 제공하지 않는다.</p>
<pre><code class="hljs">mop <span class="hljs-keyword">update</span> &lt;<span class="hljs-keyword">key</span>&gt; &lt;<span class="hljs-keyword">field</span>&gt; &lt;<span class="hljs-keyword">bytes</span>&gt; [noreply|<span class="hljs-keyword">pipe</span>]\r\n&lt;<span class="hljs-keyword">data</span>&gt;\r\n
</code></pre>
<ul>
<li>&lt;key&gt; - 대상 item의 key string</li>
<li>&lt;field&gt; - 대상 element의 field string</li>
<li>&lt;bytes&gt; - 변경할 데이터 길이 (trailing 문자인 &quot;\r\n&quot;을 제외한 길이)</li>
<li>noreply or pipe - 명시하면, response string을 전달받지 않는다.
pipe 사용은 <a href="/docs/arcus-server/ARCUS-Server-Ascii-Protocol/1.11/command-pipelining.html">Command Pipelining</a>을 참조 바란다.</li>
<li>&lt;data&gt; - 변경할 데이터 자체 (최대 4KB)</li>
</ul>
<p>Response string과 그 의미는 아래와 같다.</p>
<ul>
<li>&quot;UPDATED&quot; - 성공 (element 변경)</li>
<li>“NOT_FOUND” - key miss</li>
<li>&quot;NOT_FOUND_ELEMENT&quot; - field miss</li>
<li>“TYPE_MISMATCH” - 해당 item이 map collection이 아님</li>
<li>&quot;NOT_SUPPORTED&quot; - 지원하지 않음</li>
<li>“CLIENT_ERROR bad command line format” - protocol syntax 틀림</li>
<li>“CLIENT_ERROR too large value” - 삽입할 데이터가 4KB 보다 큼</li>
<li>“CLIENT_ERROR bad data chunk” - 삽입할 데이터 길이가 &lt;bytes&gt;와 다르거나 &quot;\r\n&quot;으로 끝나지 않음</li>
<li>“SERVER_ERROR out of memory” - 메모리 부족</li>
</ul>
<h3><a class="anchor" aria-hidden="true" id="mop-delete---map-element-삭제"></a><a href="#mop-delete---map-element-삭제" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>mop delete - Map Element 삭제</h3>
<p>Map collection에서 하나 이상의 field 이름을 주어, 그에 해당하는 element를 삭제한다.</p>
<pre><code class="hljs">mop delete &lt;key&gt; &lt;lenfields&gt; &lt;numfields&gt; [drop] [noreply|pipe]\r\n
<span class="hljs-meta">[&lt;"space separated fields"&gt;]</span>\r\n
</code></pre>
<ul>
<li>&quot;space separated fields&quot; - 대상 map의 field list로, 스페이스(' ')로 구분한다.
- 하위 호환성(1.10.X 이하 버전)을 위해 콤마(,)도 지원하지만 권장하지 않는다.</li>
<li>&lt;key&gt; - 대상 item의 key string</li>
<li>&lt;lenfields&gt;\과 &lt;numfields&gt;\ - field list 문자열의 길이와 field 개수를 나타낸다. 0이면 전체 field, element를 의미한다.</li>
<li>drop - field, element 삭제로 인해 empty map이 될 경우, 그 map을 drop할 것인지를 지정한다.</li>
<li>noreply or pipe - 명시하면, response string을 전달받지 않는다.
pipe 사용은 <a href="/docs/arcus-server/ARCUS-Server-Ascii-Protocol/1.11/command-pipelining.html">Command Pipelining</a>을 참조 바란다.</li>
</ul>
<p>Response string과 그 의미는 아래와 같다.</p>
<ul>
<li>&quot;DELETED&quot; - 성공 (전체 또는 일부 field, element 삭제)</li>
<li>“DELETED_DROPPED” - 성공 (전체 또는 일부 field, element 삭제하고 collection을 drop한 상태)</li>
<li>“NOT_FOUND” - key miss</li>
<li>“NOT_FOUND_ELEMENT” - field miss (삭제할 field, element가 없음. 모든 field가 없을 시에만 리턴)</li>
<li>“TYPE_MISMATCH” - 해당 item이 map collection이 아님</li>
<li>&quot;NOT_SUPPORTED&quot; - 지원하지 않음</li>
<li>“CLIENT_ERROR bad command line format” - protocol syntax 틀림</li>
</ul>
<h3><a class="anchor" aria-hidden="true" id="mop-get---map-field-element-조회"></a><a href="#mop-get---map-field-element-조회" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>mop get - Map Field, Element 조회</h3>
<p>Map collection에서 하나 이상의 field 이름을 주어, 그에 해당하는 element를 조회한다.</p>
<pre><code class="hljs">mop get &lt;key&gt; &lt;lenfields&gt; &lt;numfields&gt; [delete|drop]\r\n
<span class="hljs-meta">[&lt;"space separated fields"&gt;]</span>\r\n
</code></pre>
<ul>
<li>&quot;space separated fields&quot; - 대상 map의 field list로, 스페이스(' ')로 구분한다.
- 하위 호환성(1.10.X 이하 버전)을 위해 콤마(,)도 지원하지만 권장하지 않는다.</li>
<li>&lt;key&gt; - 대상 item의 key string</li>
<li>&lt;lenfields&gt; 과 &lt;numfields&gt;\ - field list 문자열의 길이와 field 개수를 나타낸다. 0이면 전체 field, element를 의미한다.</li>
<li>delete or drop - field, element 조회하면서 그 field, element를 delete할 것인지
그리고 delete로 인해 empty map이 될 경우 그 map을 drop할 것인지를 지정한다.</li>
</ul>
<p>성공 시의 response string은 아래와 같다.
VALUE 라인의 &lt;count&gt;는 조회된 field 개수를 의미한다.
마지막 라인은 END, DELETED, DELETED_DROPPED 중의 하나를 가지며
각각 field 조회만 수행한 상태, field 조회하고 삭제한 상태,
field 조회 및 삭제하고 map을 drop한 상태를 의미한다.</p>
<pre><code class="hljs">VALUE <span class="hljs-variable">&lt;flags&gt;</span> <span class="hljs-variable">&lt;count&gt;</span>\r\n
<span class="hljs-variable">&lt;field&gt;</span> <span class="hljs-variable">&lt;bytes&gt;</span> <span class="hljs-variable">&lt;data&gt;</span>\r\n
<span class="hljs-variable">&lt;field&gt;</span> <span class="hljs-variable">&lt;bytes&gt;</span> <span class="hljs-variable">&lt;data&gt;</span>\r\n
<span class="hljs-variable">&lt;field&gt;</span> <span class="hljs-variable">&lt;bytes&gt;</span> <span class="hljs-variable">&lt;data&gt;</span>\r\n
...
END|<span class="hljs-string">DELETED</span>|<span class="hljs-string">DELETED_DROPPED\r\n
</span></code></pre>
<p>실패 시의 response string과 그 의미는 아래와 같다.</p>
<ul>
<li>“NOT_FOUND” - key miss</li>
<li>“NOT_FOUND_ELEMENT” - field miss (주어진 field 이름들 중 하나라도 가진 element가 전혀 없는 상태임)</li>
<li>“TYPE_MISMATCH” - 해당 item이 map collection이 아님</li>
<li>“UNREADABLE” - 해당 item이 unreadable item임</li>
<li>&quot;NOT_SUPPORTED&quot; - 지원하지 않음</li>
<li>“CLIENT_ERROR bad command line format” - protocol syntax 틀림</li>
<li>&quot;SERVER_ERROR out of memory [writing get response]”   - 메모리 부족</li>
</ul>
</span></div></article></div><div class="docs-prevnext"></div></div></div><nav class="onPageNav"><ul class="toc-headings"><li><a href="#map-명령">MAP 명령</a><ul class="toc-headings"><li><a href="#mop-create---map-collection-생성">mop create - Map Collection 생성</a></li><li><a href="#mop-insert---map-element-삽입">mop insert - Map Element 삽입</a></li><li><a href="#mop-update---map-element-변경">mop update - Map Element 변경</a></li><li><a href="#mop-delete---map-element-삭제">mop delete - Map Element 삭제</a></li><li><a href="#mop-get---map-field-element-조회">mop get - Map Field, Element 조회</a></li></ul></li></ul></nav></div></div></body></html>